(window.wjp=window.wjp||[]).push([[53],{598:function(t,e,n){"use strict";n.r(e);var r=n(11),o=n(5),a=(n(2),n(77)),l=n.n(a),i=n(0),u=n.n(i),c=n(18),s=n(30),p=n(217),d=n(66),b=n(20),f=n(27),m=n(3),h=n(43),O=n(37),v=n(12),j=n(174),E=n(29),g=n(658),y=n(148),w=n(23);function x(){var t=Object(v.a)(["literature.PreprintFeedback.saveFeedback.html"]);return x=function(){return t},t}var C=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))||this).state={buttonStatus:"disabled"},e.sendMessage=function(){return Object(m.default)(Object(w.a)(x()),{method:"POST",body:{messageText:e.state.messageText}}).then(function(){e.props.dispatch(Object(b.pushAlert)(function(){return u.a.createElement(d.a,{title:"Thanks for your feedback",description:"Your feedback helps us improve preprints for everyone.",color:"green"})})),e.props.onClose()})},e.handleChangeTextarea=function(t){e.setState({messageText:t.target.value,buttonStatus:t.target.value.length>3?"":"disabled"})},e}return Object(o.a)(e,t),e.prototype.render=function(){return u.a.createElement(j.a,{isOpen:!0,onRequestClose:this.props.onClose},u.a.createElement(j.a.Body,null,u.a.createElement(E.a,{size:"xl",spacing:"auto"},"Enter your feedback below"),u.a.createElement(g.a,{onChange:this.handleChangeTextarea})),u.a.createElement(j.a.Footer,null,u.a.createElement(y.a,null,u.a.createElement(s.a,{type:"button",color:"blue",theme:"bare",onClick:this.props.onClose},"Cancel"),u.a.createElement(s.a,{type:"button",color:"blue",onClick:this.sendMessage,status:this.state.buttonStatus},"Send"))))},e}(i.Component);C.displayName="PreprintFeedback";var P=Object(c.a)()(C);n.d(e,"MODAL_PREPRINT",function(){return M}),n.d(e,"storeDelayedAlert",function(){return k}),n.d(e,"removeDelayedAlert",function(){return N}),n.d(e,"AlertObjectBuilder",function(){return D});var A="1:delayedAlertStore:",M="preprint";function T(t){return A+t}function k(t,e){var n=T(e),r=l.a.get(n);r||(r=[]),U(t),r.push(t),l.a.set(n,r)}function N(t){var e=T(t);l.a.remove(e)}var S=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))||this).handleModalClose=function(){e.props.dispatch(Object(O.unmountModal)())},e}Object(o.a)(e,t);var n=e.prototype;return n.getForwardToHandler=function(t){var e=this;return function(n){n.preventDefault(),Object(f.a)(e.props.buttonClickedMilestoneUrl),Object(h.b)(t)}},n.getOpenModalHandler=function(t,e){var n=this;return function(o){o.preventDefault(),Object(f.a)(n.props.buttonClickedMilestoneUrl),t===M&&n.props.dispatch(Object(O.mountModal)(function(){return u.a.createElement(P,Object(r.a)({onClose:n.handleModalClose},e))}))}},n.startExperiment=function(){Object(m.default)(this.props.startExperimentUrl,{method:"POST",query:{viewId:this.props.viewId}})},n.componentDidMount=function(){var t=this,e=T(this.props.currentAccountId),n=l.a.get(e);if(n)for(var r=function(e){var r=n[e];U(r);var o=window.location.pathname;if(-1!==r.removeOnUrlPaths.indexOf(o))return N(t.props.currentAccountId),"continue";var a=function(){};r.button.url&&(a=t.getForwardToHandler(r.button.url)),r.button.modalName&&r.button.modalParams&&(a=t.getOpenModalHandler(r.button.modalName,r.button.modalParams));var l=r.button.text?u.a.createElement(s.a,{type:"button",theme:"inverted",onClick:a},r.button.text):null,i=r.iconName?u.a.createElement(p.a,{identifier:r.iconName,size:"l"}):null,c=u.a.createElement(d.a,{title:r.title,description:r.description,color:r.color},l,i);t.props.dispatch(Object(b.pushAlert)(function(){return c})),N(t.props.currentAccountId),r.startExperiment&&t.startExperiment()},o=0;o<n.length;o++)r(o)},n.render=function(){return null},e}(i.Component);S.displayName="DelayedAlert";var D=function(){function t(){this.alertObject={title:null,description:null,button:{text:null,url:null,modalName:null,modalParams:{}},color:"blue",removeOnUrlPaths:[],iconName:null,startExperiment:!1}}var e=t.prototype;return e.setTitle=function(t){this.alertObject.title=t},e.setDescription=function(t){this.alertObject.description=t},e.setButtonText=function(t){this.alertObject.button.text=t},e.setButtonUrl=function(t){this.alertObject.button.url=t},e.setButtonOpenModal=function(t,e){this.alertObject.button.modalName=t,this.alertObject.button.modalParams=e},e.setColor=function(t){this.alertObject.color=t},e.setRemoveOnUrlPaths=function(t){this.alertObject.removeOnUrlPaths=t},e.setStartExperiment=function(t){this.alertObject.startExperiment=t},e.setIcon=function(t){this.alertObject.iconName=t},e.build=function(){return this.alertObject},t}();function U(t){if(null===t.title)throw new Error("alertObject.title not set");if(null===t.description)throw new Error("alertObject.description not set")}e.default=Object(c.a)()(S)}}]);